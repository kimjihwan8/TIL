# 3. **Lerna**

---

## 3.1 개념

모노레포 관리 도구의 조상님 격이자, 현재는 현대적인 기능을 흡수하여 여전히 현역으로 쓰이는 1세대 모노레포 관리 도구입니다

## 3.2 나오게 된 이유

과거 Nx나 Turborepo가 나오기 전, Lerna가 만들어진 가장 큰 이유는 여러 개의 패키지를 한 번에 NPM에 올리기 위해서이다.

버전 관리의 지옥, 반복적인 배포 작업, 의존성 꼬임 등의 문제를 명령어 한 줄로 자동화해준다.

## 3.3 장점

1. 강력한 배포 자동화: lerna publish 명령어 하나로 변경된 패키지 감지, 버전 업데이트, Git 태그 생성, npm 배포를 한 번에 끝낸다.
2. 유연한 버전 전략:
    - Fixed 모드: 모든 패키지를 하나의 버전으로 통일하여 관리.
    - Independent 모드: 각 패키지마다 수정 사항이 있을 때만 개별적으로 버전 관리.
3. 변경 사항 추적: 마지막 배포 이후 어떤 패키지에서 수정이 일어났는지 정확히 파악하여 필요한 부분만 작업합니다.
4. 현대적 성능 (Nx 통합): 2026년 현재 Lerna는 Nx의 캐싱 기능을 공유하므로, 한 번 빌드한 내용은 다시 빌드하지 않는 초고속 성능을 보여줍니다.

## 3.4 단점

1. 지금의 Turborepo나 Nx처럼 캐싱 개념이 없었다. 무조건 순차적으로 하나씩 빌드하고 배포했기 때문에 패키지가 많아지면 배포 시간이 수십 분씩 걸렸다.
2. 라이브러리를 한곳에 모아 관리하다 보니 설치하지 않은 라이브러리를 참조해도 에러가 나지 않다가 실제 배포 후에 터지는 고질적인 문제가 있었다.
3. 단순 프로젝트에는 과하다. 외부 npm 배포가 목적이 아닌, 내부 서비스용 모노레포라면 Lerna의 배포 기능이 불필요하게 느껴질 수 있다.

## 3.5 현재의 Lerna

배포를 전문적으로 하던 Lerna가 Nx라는 슈퍼 엔진을 장착해 속도까지 정점 찍었다.

1. 엔진 교체: 과거의 가장 큰 단점이었던 느린 속도를 해결하기 위해 Nx 엔진을 도입했다. 이제 Turborepo처럼 빌드 캐싱이 가능해져서 수정 안 된 패키지는 0.1초 만에 빌드를 건너뛴다.
2. 배포 권위자 유지: 여전히 모노레포 도구 중 버전 관리와 NPM 배포 자동화 기능은 가장 정교하고 강력하다.
3. 가벼워진 역할: 과거에 직접 하던 복잡한 의존성 연결기능은 이제 npm 이나 pmpm 자체 워크스페이스 기능에 맡기고 본인은 빌드 최적화와 배포에만 집중한다.